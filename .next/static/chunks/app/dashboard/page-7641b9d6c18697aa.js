(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{9400:(e,s,t)=>{Promise.resolve().then(t.bind(t,6778))},6778:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(5155),i=t(8803),l=t.n(i),a=t(2115),o=t(6793),c=t.n(o),n=t(2722);function d(e){let{title:s,value:t,description:i,icon:l,trend:a}=e;return(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl p-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-gray-400 text-sm font-medium",children:s}),l&&(0,r.jsx)("div",{className:"text-gray-400",children:l})]}),(0,r.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t}),a&&(0,r.jsxs)("div",{className:"text-sm ".concat(a.isPositive?"text-green-400":"text-red-400"," flex items-center"),children:[a.isPositive?"↑":"↓"," ",Math.abs(a.value),"%"]})]}),i&&(0,r.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:i})]})}var m=t(5565),x=t(3473);function u(e){let{service:s,onClick:t}=e;return(0,r.jsx)("div",{className:"bg-gray-800 rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-4px]",style:{borderTop:"4px solid ".concat(s.color)},onClick:t,children:(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"h-12 w-12 relative rounded-lg overflow-hidden bg-gray-700 flex items-center justify-center",children:(0,r.jsx)(m.default,{src:s.logo,alt:s.name,width:36,height:36})}),(0,r.jsxs)("div",{className:"text-xl font-bold text-white",children:["$",s.price.toFixed(2),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"/mo"})]})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:s.name}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:s.description}),void 0!==s.activePools&&(0,r.jsxs)("div",{className:"text-sm text-gray-300 mb-4",children:[(0,r.jsx)("span",{className:"font-medium",children:s.activePools})," active pools"]}),(0,r.jsxs)("button",{className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md flex items-center justify-center transition duration-200",children:[(0,r.jsx)(x.A,{size:16,className:"mr-2"}),"Join Pool"]})]})})}var h=t(3556),v=t(6233),p=t(4807),f=t(2823),g=t(8251),j=t(7594),b=t(3518),y=t(6967),N=t(7568);let w={Netflix:"#E50914",Spotify:"#1DB954","Disney+":"#0063E5","Amazon Prime":"#FF9900","YouTube Premium":"#FF0000","HBO Max":"#5822B4","Apple TV+":"#000000"},S=()=>{let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)([]),[o,m]=(0,a.useState)(!0),[x,S]=(0,a.useState)(0),[P,A]=(0,a.useState)(0),[k,E]=(0,a.useState)(0),z=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=async()=>{try{i([{id:"1",name:"Netflix",logo:"/assets/logos/netflix.svg",price:15.99,description:"Premium streaming service with movies, TV shows, and more.",color:"#E50914",activePools:3},{id:"2",name:"Spotify",logo:"/assets/logos/spotify.svg",price:9.99,description:"Music streaming with millions of songs and podcasts.",color:"#1DB954",activePools:5},{id:"3",name:"Disney+",logo:"/assets/logos/disneyplus.svg",price:8.99,description:"Stream Disney, Marvel, Star Wars, and more.",color:"#0063E5",activePools:2}])}catch(e){console.error("Error fetching popular services:",e)}};(async()=>{try{let e=await N.U.getUserPools(),t=await Promise.all(e.map(async e=>{if(!e.serviceName||!e.serviceLogoUrl)try{let s=await N.U.getServiceInfo(e.serviceId);return{...e,serviceName:s.name,serviceLogoUrl:s.logoUrl}}catch(s){console.error("Error fetching service info for pool ".concat(e.poolId,":"),s)}return e}));s(t);let r=t.reduce((e,s)=>e+parseFloat(s.costPerSlot),0);S(r)}catch(e){console.error("Error fetching user pools:",e)}finally{m(!1)}})(),e()},[]),(0,a.useEffect)(()=>{let e=()=>{if(z.current){let e=z.current;E(e.scrollWidth-e.clientWidth)}};e(),window.addEventListener("resize",e);let s=()=>{z.current&&A(z.current.scrollLeft)},t=z.current;return t&&t.addEventListener("scroll",s),()=>{window.removeEventListener("resize",e),t&&t.removeEventListener("scroll",s)}},[e]);let L=e.map(e=>{var s,t;let r=w[e.serviceName||""]||"#6366f1",i=new Date((null===(s=e.membershipStatus)||void 0===s?void 0:s.joinedAt)||new Date),l=new Date(i);l.setMonth(i.getMonth()+1);let a=[{id:"1",name:"You",isPrimary:!1},{id:"2",name:"Primary Owner",isPrimary:!0}],o=e.slotsTotal-e.slotsAvailable;if(o>2)for(let e=3;e<=o;e++)a.push({id:"".concat(e),name:"Member ".concat(e-1),isPrimary:!1});return{id:e.poolId,serviceName:e.serviceName||"Subscription Service",serviceLogo:e.serviceLogoUrl||"/assets/logos/default.svg",serviceColor:r,totalCost:parseFloat(e.costPerSlot)*e.slotsTotal,splitCost:parseFloat(e.costPerSlot),members:a,capacity:e.slotsTotal,slotsAvailable:e.slotsAvailable||0,expiresAt:l.toISOString(),status:(null===(t=e.membershipStatus)||void 0===t?void 0:t.accessStatus)==="active"?"active":"pending",isUserMember:!0}});return(0,r.jsxs)(n.A,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Dashboard | SubSplitter"})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-1",children:"Welcome back, John"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Here's what's happening with your subscriptions"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)(d,{title:"Total Subscriptions",value:e.length,icon:(0,r.jsx)(v.A,{size:20}),description:"Across ".concat(new Set(e.map(e=>e.serviceName)).size," services")}),(0,r.jsx)(d,{title:"Monthly Spending",value:"$".concat(x.toFixed(2)),trend:{value:15,isPositive:!1},icon:(0,r.jsx)(p.A,{size:20}),description:"vs. $32.48 last month"}),(0,r.jsx)(d,{title:"Active Pools",value:e.filter(e=>{var s;return(null===(s=e.membershipStatus)||void 0===s?void 0:s.accessStatus)==="active"}).length,icon:(0,r.jsx)(f.A,{size:20}),description:"".concat(e.length-e.filter(e=>{var s;return(null===(s=e.membershipStatus)||void 0===s?void 0:s.accessStatus)==="active"}).length," pending")}),(0,r.jsx)(d,{title:"Total Saved",value:"$142.68",trend:{value:8,isPositive:!0},icon:(0,r.jsx)(g.A,{size:20}),description:"Lifetime savings"})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Your Joined Pools"})}),o?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)(j.A,{size:32,className:"text-purple-500 animate-spin mb-4"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Loading subscription pools..."})]}):0===e.length?(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-6 text-center",children:[(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"You haven't joined any subscription pools yet."}),(0,r.jsx)("button",{className:"mt-4 bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition",children:"Browse Available Pools"})]}):(0,r.jsxs)("div",{className:"jsx-f109046e9fac516 relative",children:[P>0&&(0,r.jsx)("button",{onClick:()=>{z.current&&z.current.scrollBy({left:-320,behavior:"smooth"})},"aria-label":"Scroll left",className:"jsx-f109046e9fac516 absolute left-0 top-1/2 -translate-y-1/2 -ml-4 z-10 h-10 w-10 bg-white dark:bg-gray-800 rounded-full shadow-lg flex items-center justify-center opacity-90 hover:opacity-100 transition",children:(0,r.jsx)(b.A,{size:20,className:"text-gray-600 dark:text-gray-300"})}),P<k&&(0,r.jsx)("button",{onClick:()=>{z.current&&z.current.scrollBy({left:320,behavior:"smooth"})},"aria-label":"Scroll right",className:"jsx-f109046e9fac516 absolute right-0 top-1/2 -translate-y-1/2 -mr-4 z-10 h-10 w-10 bg-white dark:bg-gray-800 rounded-full shadow-lg flex items-center justify-center opacity-90 hover:opacity-100 transition",children:(0,r.jsx)(y.A,{size:20,className:"text-gray-600 dark:text-gray-300"})}),(0,r.jsxs)("div",{ref:z,style:{scrollbarWidth:"none",msOverflowStyle:"none"},className:"jsx-f109046e9fac516 flex overflow-x-auto pb-4 scrollbar-hide snap-x scroll-smooth",children:[L.map(e=>(0,r.jsx)("div",{className:"jsx-f109046e9fac516 flex-none w-80 mr-4 snap-start",children:(0,r.jsx)(h.A,{pool:e})},e.id)),(0,r.jsx)("div",{className:"jsx-f109046e9fac516 flex-none w-4"})]}),(0,r.jsx)(l(),{id:"f109046e9fac516",children:".scrollbar-hide.jsx-f109046e9fac516::-webkit-scrollbar{display:none}"}),L.length>1&&(0,r.jsx)("div",{className:"jsx-f109046e9fac516 flex justify-center mt-4 space-x-1",children:L.map((e,s)=>{let t=P>=320*s-160&&P<(s+1)*320-160;return(0,r.jsx)("div",{className:"jsx-f109046e9fac516 "+"h-1 rounded-full transition-all duration-300 ".concat(t?"w-6 bg-purple-500":"w-3 bg-gray-300 dark:bg-gray-700")},s)})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Popular Subscriptions"}),(0,r.jsx)("button",{className:"text-purple-500 text-sm hover:text-purple-400 transition",children:"Browse All"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,r.jsx)(u,{service:e},e.id))})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[407,291,921,600,518,85,556,441,517,358],()=>s(9400)),_N_E=e.O()}]);