(()=>{var e={};e.id=593,e.ids=[593],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},4405:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>d});var s=r(260),o=r(8203),l=r(5155),a=r.n(l),n=r(7292),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(t,i);let d=["",{children:["pools",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7769)),"X:\\Web Devlopment\\SubSplitter\\Frontend\\src\\app\\pools\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"X:\\Web Devlopment\\SubSplitter\\Frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["X:\\Web Devlopment\\SubSplitter\\Frontend\\src\\app\\pools\\page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/pools/page",pathname:"/pools",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6905:(e,t,r)=>{Promise.resolve().then(r.bind(r,7769))},7177:(e,t,r)=>{Promise.resolve().then(r.bind(r,2924))},2924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5512),o=r(8009),l=r(6095),a=r.n(l),n=r(9621),i=r(2610),d=r(8741),p=r(6873),c=r(4520);let u=(0,r(1680).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var x=r(4977),m=r(5402),h=r(9334);let g={sortBy:["Recently Updated","Price: Low to High","Price: High to Low","Expiring Soon"]};function b(){(0,h.useSearchParams)();let e=(0,h.useRouter)(),[t,r]=(0,o.useState)([]),[l,a]=(0,o.useState)(!0),[n,b]=(0,o.useState)(null),[f,v]=(0,o.useState)(""),[y,j]=(0,o.useState)("All"),[w,N]=(0,o.useState)("Recently Updated"),[P,A]=(0,o.useState)(!1),S=async e=>{try{a(!0);let e=await m.U.getAllPools();r(e),a(!1)}catch(e){console.error("Error refreshing pools:",e),b("Failed to refresh pool list. Please reload the page."),a(!1)}},C=()=>{window.location.href="/pools/create-pool"},k=async e=>{try{a(!0),await m.U.leavePool(e);let t=await m.U.getAllPools();r(t),a(!1)}catch(e){console.error("Error leaving pool:",e),b("Failed to leave pool. Please try again later."),a(!1)}},_=()=>"1",z=[...t.filter(e=>{let t=e.serviceName.toLowerCase().includes(f.toLowerCase()),r="All"===y||e.status===y.toLowerCase(),s=_(),o=!P||e.members.some(e=>e.id===s);return t&&r&&o})].sort((e,t)=>"Price: Low to High"===w?e.splitCost-t.splitCost:"Price: High to Low"===w?t.splitCost-e.splitCost:"Expiring Soon"===w?new Date(e.expiresAt).getTime()-new Date(t.expiresAt).getTime():new Date(t.lastPayment||t.expiresAt).getTime()-new Date(e.lastPayment||e.expiresAt).getTime());return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-1",children:"Subscription Pools"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Manage your shared subscriptions"})]}),(0,s.jsxs)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md flex items-center justify-center transition duration-200",onClick:C,children:[(0,s.jsx)(d.A,{size:18,className:"mr-2"}),"Create New Pool"]})]}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-xl p-4 mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search pools...",className:"w-full bg-gray-700 text-gray-200 rounded-md py-2 pl-10 pr-4 focus:outline-none focus:ring-1 focus:ring-purple-500",value:f,onChange:e=>v(e.target.value)}),(0,s.jsx)(p.A,{size:18,className:"absolute left-3 top-2.5 text-gray-400"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md transition duration-200",onClick:()=>{v(""),j("All"),A(!1);let t=window.location.pathname;e.push(t)},children:"Clear Filters"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("select",{className:"appearance-none bg-gray-700 text-gray-200 rounded-md py-2 pl-10 pr-8 focus:outline-none focus:ring-1 focus:ring-purple-500",value:w,onChange:e=>N(e.target.value),children:g.sortBy.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(c.A,{size:18,className:"absolute left-3 top-2.5 text-gray-400"}),(0,s.jsx)("div",{className:"absolute right-2 top-2.5 pointer-events-none text-gray-400",children:(0,s.jsx)(u,{size:16})})]})]})]})}),l&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,s.jsx)(x.A,{size:24,className:"text-gray-500"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Loading pools..."})]}),n&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(x.A,{size:24,className:"text-gray-500"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2 text-red-400",children:"Error"}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:n}),(0,s.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md transition duration-200",onClick:()=>{b(null),a(!0),m.U.getAllPools().then(e=>{r(e),a(!1)}).catch(e=>{console.error("Error retrying pools fetch:",e),b("Failed to load subscription pools. Please try again later."),a(!1)})},children:"Retry"})]}),!l&&!n&&z.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:z.map(e=>(0,s.jsx)(i.A,{pool:e,onJoin:()=>S(e.id),onLeave:()=>k(e.id),currentUserId:_(),onClick:()=>{window.location.href=`/pools/${e.id}`}},e.id))}),!l&&!n&&0===z.length&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(x.A,{size:24,className:"text-gray-500"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No pools found"}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:f||"All"!==y||!P?"Try adjusting your search or filters":"Start by creating a new subscription pool or joining an existing one"}),f||"All"!==y||!P?(0,s.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md transition duration-200",onClick:()=>{v(""),j("All"),A(!0)},children:"Clear Filters"}):(0,s.jsxs)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md flex items-center justify-center transition duration-200 mx-auto",onClick:C,children:[(0,s.jsx)(d.A,{size:18,className:"mr-2"}),"Create New Pool"]})]})]})}let f=()=>(0,s.jsxs)(n.A,{children:[(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:"Subscription Pools | SubSplitter"})}),(0,s.jsx)(o.Suspense,{fallback:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,s.jsx)(x.A,{size:24,className:"text-gray-500"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Loading pools..."})]}),children:(0,s.jsx)(b,{})})]})},7769:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"X:\\\\Web Devlopment\\\\SubSplitter\\\\Frontend\\\\src\\\\app\\\\pools\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"X:\\Web Devlopment\\SubSplitter\\Frontend\\src\\app\\pools\\page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,263,433,163,441,286],()=>r(4405));module.exports=s})();